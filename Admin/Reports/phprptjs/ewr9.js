/**
 * JavaScript for PHP Report Maker 9
 * @license (C)2007-2015 e.World Technology Ltd.
 */function ewr_InitIcons(){var e=jQuery;e(".ewIcon, .ewTableHeaderPopup .icon-filter").closest("a, button").add(".ewDrillLink, .ewTooltip").tooltip({container:"body",trigger:EWR_IS_MOBILE?"manual":"hover",placement:"bottom"})}function ewr_SetSessionTimer(){if(typeof EWR_IS_LOGGEDIN=="undefined"||!EWR_IS_LOGGEDIN)return;var e=jQuery,t,n,r,i,s,o=e("#ewrTimer"),u=(EWR_SESSION_KEEP_ALIVE_INTERVAL>0||EWR_IS_AUTOLOGIN)&&EWR_SESSION_URL,a=function(){var t=EWR_SESSION_URL+"?rnd="+ewr_Random();e.get(t,function(t){EWR_TOKEN=t,e("input:hidden[name=token]").val(t)})};o.find(".modal-footer .btn-primary").click(function(e){r&&r.cancel(),o.modal("hide"),a(),!u&&EWR_SESSION_TIMEOUT>0&&c()});var f=function(){s=EWR_SESSION_TIMEOUT_COUNTDOWN,t=EWR_SESSION_TIMEOUT-EWR_SESSION_TIMEOUT_COUNTDOWN,t<0&&(t=0,s=EWR_SESSION_TIMEOUT),r&&r.cancel(),n&&n.cancel()},l=function(){i&&i.cancel(),r=e.later(1e3,null,function(){s>0?(o.find(".modal-body").html('<p class="text-danger">'+ewLanguage.Phrase("SessionWillExpire").replace("%s",s)+"</p>"),o.modal("show")):(o.find(".modal-body").html('<p class="text-danger">'+ewLanguage.Phrase("SessionExpired")+"</p>"),f(),e.later(1e3,null,function(){o.modal("hide"),window.location=EWR_LOGOUT_URL+"?expired=1"})),s--},null,!0)},c=function(){f(),n=e.later(t*1e3,null,l)};if(u){var h=EWR_SESSION_KEEP_ALIVE_INTERVAL>0?EWR_SESSION_KEEP_ALIVE_INTERVAL:EWR_SESSION_TIMEOUT-EWR_SESSION_TIMEOUT_COUNTDOWN;h<=0&&(h=60),i=e.later(h*1e3,null,a,null,!0)}else EWR_SESSION_TIMEOUT>0&&c()}function ewr_On(e,t,n){var r=jQuery,i;r.isString(e)?i=/^\w+(\[\])?$/.test(e)?r("[id='"+e+"'],[name='"+e+"']"):r(e):i=r(e),i.on(t,n)}function ewr_Batch(e,t,n,r){var i=jQuery,s=[],o=r?n:null;e=e&&(e.tagName||e.item)?e:i(e).get();if(!e||!t)return!1;if(e.tagName||e.length===undefined)return t.call(o,e,n);for(var u=0;u<e.length;++u)s[s.length]=t.call(o||e[u],e[u],n);return s}function ewr_Select(e,t,n){var r=jQuery,i=r(t),s=i.find(e).get();return r.isFunction(n)?s=ewr_Batch(s,n):r.isString(n)&&(s=ewr_Batch(s,new Function(n))),s}function ewr_Matches(e,t,n){var r=jQuery,i=r(t).filter(e).get();return r.isFunction(n)?i=ewr_Batch(i,n):r.isString(n)&&(i=ewr_Batch(i,new Function(n))),i}function ewr_ExportCharts(e,t,n,r){function u(){r&&!/&(amp;)?custom=1/.test(t)?(data=i(r).serialize(),data+="&token="+EWR_TOKEN,i.post(t,data,function(e){ewr_ShowMessage(e)})):/export=(word|excel|pdf|email)&(amp;)?custom=1/.test(t)?(/export=email/.test(t)&&(t=t.replace(/export=email&(amp;)?/i,""),t+="&"+i(r).serialize()),i("iframe.ewExport").remove(),i("<iframe>").attr("src",t).addClass("ewExport").hide().appendTo(i("body").css("cursor","wait")),i.later(5e3,null,function(){i("body").css("cursor","default")})):ewr_Redirect(t,r,o)}function f(e){var t=FusionCharts(e),r="cht_"+e.substr(6),s="div_export_"+e.substr(6),o=i("#"+s+" svg"),l={stream_type:"svg",stream:t.getSVGString(),token:EWR_TOKEN,meta_bgColor:"#ffffff",meta_bgAlpha:"1",meta_DOMId:e,meta_width:o.attr("width"),meta_height:o.attr("height"),parameters:"exportfilename="+n+"_"+e+".png|exportformat=png|exportaction=download|exportparameters=undefined"};i.ajax({url:EWR_CHART_EXPORT_HANDLER,data:l,cache:!1,type:"POST",success:function(){a++,a==ewrExportCharts.length?(u(),ewrExporting=!1,i("body").css("cursor","default")):f(ewrExportCharts[a])}}).fail(function(e,t,n){ewrExporting=!1,i("body").css("cursor","default"),ewr_Alert(n)})}if(ewrExporting)return;n+="_"+(new Date).getTime(),t+=(t.split("?").length>1?"&":"?")+"exportid="+n;var i=jQuery,s=i(e),o=r?"post":"get";s.is(".dropdown-menu a")&&(s=s.closest(".btn-group"));if(ewrExportCharts.length==0)return u();var a=0;ewrExporting=!0,i("body").css("cursor","wait"),f(ewrExportCharts[0])}function ewr_CreatePopup(e,t){ewrPopups[e]=t}function ewr_ShowPopup(e,t,n,r,i){ewr_StopPropagation(e);var s=jQuery,o=s(this).tooltip("hide"),u=function(){var e=o.data("bs.popover").tip(),n=e.find("form")[0],r=s('<button type="button" class="btn btn-primary btn-sm ewPopupBtn">'+ewLanguage.Phrase("MessageOK")+"</button>").click(function(){n&&!ewr_SelectedEntry(n,t)?ewr_Alert(ewLanguage.Phrase("PopupNoValue")):(n&&n.submit(),o.popover("hide"))});e.find(".modal-footer").append(r).show()},a=function(){var e=o.data("bs.popover").tip(),t=e.find("form")[0],n=s('<button type="button" class="btn btn-default btn-sm ewPopupBtn">'+ewLanguage.Phrase("Cancel")+"</button>").click(function(){o.popover("hide")});e.find(".modal-footer").append(n)};if(!o.data("bs.popover")){o.popover({html:!0,placement:"bottom",trigger:"manual",template:'<div class="popover"><div class="popover-content" style="overflow: auto;"></div><div class="modal-footer" style="display: none;"></div><div class="ewResizeHandle"></div></div>',content:'<div class="ewrLoading"><div class="ewSpinner"><div></div></div> '+ewLanguage.Phrase("Loading").replace("%s","")+"</div>",container:s("#ewrPopupFilterDialog")}).on("shown.bs.popover",function(e){ewrPopups[t]?(ewr_SetPopupContent.call(o[0],t,ewrPopups[t],n,r,i),u(),a()):s.ajax({cache:!1,dataType:"json",data:"popup="+t,url:window.location.href.split("?")[0].split("#")[0],success:function(e){var t=o.data("args");ewr_CreatePopup(t.popupname,e),ewr_SetPopupContent.call(o[0],t.popupname,e,t.useRange,t.rangeFrom,t.rangeTo),u(),a()},error:function(e){if(e.responseText){var t=o.data("bs.popover").tip();t.find(".popover-content").empty().append('<p class="text-error">'+e.responseText+"</p>"),t.find(".modal-footer").empty(),u()}}})});var f=o.data("bs.popover").tip(),l=f.find(".popover-content"),c=l.innerHeight()-l.height(),h;f.drag("start",function(e,t){var n=s(this);t.width=n.width(),t.height=n.height(),h=f.find(".modal-footer").outerHeight()}).drag(function(e,t){var n=s(this),r=Math.max(EWR_POPUP_MINWIDTH,t.width+t.deltaX),i=Math.max(EWR_POPUP_MINHEIGHT,t.height+t.deltaY);n.css({width:r,height:i}),n.find(".popover-content").height(i-h-c)},{handle:".ewResizeHandle"})}o.data("args",{popupname:t,useRange:n,rangeFrom:r,rangeTo:i}).popover("show")}function ewr_SetPopupContent(e,t,n,r,i){var s=jQuery,o=0,u=s(this);s.map(t,function(e){e.s===!1&&o++});var a=o==0,f=!1,l=a?" checked":"",c=s('<form id="'+e+'_FilterForm" class="form-horizontal" method="post">'+'<input type="hidden" name="token" value="'+EWR_TOKEN+'">'+'<input type="hidden" name="popup" value="'+e+'">'+'<div class="ewPopupContainer"></div></form>'),h=c.find("div");if(n){h.append('<div class="ewPopupItem"><table class="ewPopupRange"><tr><td>'+ewLanguage.Phrase("PopupFrom")+"</td><td>"+'<select class="form-control" name="rf_'+e+'" style="width: auto;" onchange="ewr_SelectRange(this, \''+e+"');\">"+"</select></td></tr>"+"<tr><td>"+ewLanguage.Phrase("PopupTo")+"</td><td>"+'<select class="form-control" name="rt_'+e+'" style="width: auto;" onchange="ewr_SelectRange(this, \''+e+"');\">"+"</select></td></tr></table></div>");var p=h.find("select").first();p.append('<option value="">'+ewLanguage.Phrase("PopupSelect")+"</option>"),s.map(t,function(e){var t=e.k,n=e.v;if(t.substring(0,2)!="@@"&&t!=EWR_NULL_VALUE&&t!=EWR_EMPTY_VALUE){var i=t==r?" selected":"";p.append('<option value="'+t+'"'+i+">"+n+"</option>")}});var p=h.find("select").last();p.append('<option value="">'+ewLanguage.Phrase("PopupSelect")+"</option>"),s.map(t,function(e){var t=e.k,n=e.v;t.substring(0,2)!="@@"&&t!=EWR_NULL_VALUE&&t!=EWR_EMPTY_VALUE&&(selected=t==i?" selected":"",p.append('<option value="'+t+'"'+selected+">"+n+"</option>"))}),h.append('<div class="ewPopupDivider"></div>')}h.append('<div class="ewPopupItem checkbox"><label><input type="checkbox" name="sel_'+e+'[]" value="" onclick="ewr_SelectAll(this);"'+l+">"+ewLanguage.Phrase("PopupAll")+"</label></div>"),s.map(t,function(t){var n=t.k,r=t.v,i=t.s?" checked":"";n.substring(0,2)=="@@"?f=!0:f&&(f=!1,h.append('<div class="ewPopupDivider"></div>')),h.append('<div class="ewPopupItem checkbox"><label><input type="checkbox" name="sel_'+e+'[]" value="'+n+'" onclick="ewr_UpdateSelectAll(this);"'+i+">"+r+"</label></div>")});var d=u.data("bs.popover").tip();d.find(".popover-content").empty().append(c),d.find(".modal-footer").empty()}function ewr_SelectedEntry(e,t){var n=jQuery,r=n(e.elements["sel_"+t+"[]"]);return r.length>0?r.filter(":not(:first):checked").length>0:r.prop("checked")}function ewr_SelectAll(e){ewr_ClearRange(e),jQuery(e.form.elements).filter("input:checkbox[name='"+e.name+"']:not(:first)").prop("checked",e.checked)}function ewr_UpdateSelectAll(e){ewr_ClearRange(e);var t=e.form;t&&(t.elements[e.name][0].checked=jQuery(e.form.elements).filter("input:checkbox[name='"+e.name+"']:not(:first):not(:checked)").length==0)}function ewr_SelectRange(e){var t,n,r=e.form,i=e.name.replace(/^r[ft]_/,"");r.elements["rf_"+i].selectedIndex>-1&&(t=r.elements["rf_"+i].options[r.elements["rf_"+i].selectedIndex].value),r.elements["rt_"+i].selectedIndex>-1&&(n=r.elements["rt_"+i].options[r.elements["rt_"+i].selectedIndex].value);if(!$.isValue(t)||!$.isValue(n)||t===""||n==="")return;ewr_SetRange(e,t,n,!0)}function ewr_ClearRange(e){var t=e.form,n=e.name.replace(/^sel__/,"").replace(/\[\]$/,""),r=t.elements["rf_"+n],i=t.elements["rt_"+n];r&&i&&r.selectedIndex>0&&i.selectedIndex>0&&(r.selectedIndex=0,i.selectedIndex=0,ewr_SetRange(e,r.options[r.selectedIndex].value,i.options[i.selectedIndex].value,!1))}function ewr_SetRange(e,t,n,r){var i=jQuery,s=e.form,o=e.name.replace(/^r[ft]_/,"sel_")+"[]",u;i(s.elements).filter("input:checkbox[name='"+o+"']").each(function(){this.value==t&&(u=!0),u?this.checked=r:r&&(this.checked=!1),this.value==n&&(u=!1)})}function ewr_Page(e){this.Name=e,this.PageID="",this.ValidateRequired=!0}function ewr_Form(e){var t=jQuery;this.ID=e,this.$Element=null,this.Form=null,this.InitSearchPanel=!1,this.SrchOprChanged=function(e){var n=this.GetForm(),r=t(n),i=t.isString(e)?n.elements[e]:e;if(!i)return;var s=/^so2_/.test(i.id)?i.id.substr(4):i.id.substr(3),o=t(i).val(),u=o=="BETWEEN",a=o=="IS NULL"||o=="IS NOT NULL";/^so_/.test(i.id)&&r.find("[name^=sv_"+s+"],[name^=cal_sv_"+s+"]").prop("disabled",a),/^so2_/.test(i.id)&&r.find("[name^=sv2_"+s+"],[name^=cal_sv2_"+s+"]").prop("disabled",a),r.find("span.btw0_"+s).toggle(!u).end().find("span.btw1_"+s).toggle(u).find(":input").prop("disabled",!u)},this.ValidateRequired=!0,this.Validate=null,this.DisableForm=function(){if(!EWR_DISABLE_BUTTON_ON_SUBMIT)return;var e=this.GetForm();t(e).find(":submit, :reset").prop("disabled",!0).addClass("disabled")},this.EnableForm=function(){if(!EWR_DISABLE_BUTTON_ON_SUBMIT)return;var e=this.GetForm();t(e).find(":submit, :reset").prop("disabled",!1).removeClass("disabled")},this.PreSubmit=function(){var e=this.GetForm(),n=t(e);n.find("input[name^=s_],input[name^=sx_],input[name^=q_]").prop("disabled",!0)},this.Submit=function(e){var n=this.GetForm(),r=t(n);return this.DisableForm(),!this.Validate||this.Validate()?(e&&(n.action=e),this.PreSubmit(),n.submit()):this.EnableForm(),!1},this.EmptyRow=null,this.MultiPage=null,this.Lists=function(e){return this.Lists[e]},this.CompileTemplates=function(){for(var e in this.Lists){var n=this.Lists[e];n.Template&&t.isString(n.Template)&&(n.Template=t.templates(n.Template))}},this.AutoSuggests={},this.GetForm=function(){return this.Form||(this.$Element=t("#"+this.ID),this.$Element.is("form")?this.Form=this.$Element[0]:this.$Element.is("div")&&(this.Form=this.$Element.closest("form")[0])),this.Form},this.UpdateOpts=function(e){if(e===$rowindex$)return;var n=[],r=this.GetForm();this.CompileTemplates();for(var i in this.Lists){var s=this.Lists[i].ParentFields.slice(),o=this.Lists[i].Ajax;if(t.isValue(e)){i=i.replace(/^x_/,"x"+e+"_");for(var u=0,a=s.length;u<a;u++)s[u]=s[u].replace(/^x_/,"x"+e+"_")}if(t.isBoolean(o)){var f=[];for(var u=0,a=s.length;u<a;u++)f[f.length]=ewr_GetOptValues(s[u],r);n[n.length]=[i,f,o,!1]}else ewr_UpdateOpt.call(this,i,s,null,!1)}for(var u=0,l=n.length;u<l;u++)ewr_UpdateOpt.apply(this,n[u])},this.CreateAutoSuggest=function(e){e.form=this,t(function(){e.form.AutoSuggests[e.id]=new ewr_AutoSuggest(e)})},this.OnError=function(e,t){return ewr_OnError(this,e,t)},this.GetFormData=function(){var e=this.GetForm(),n=t(e);return ewr_HasFormData(e)?(this.PreSubmit(),n.serialize()):""},this.SetupFilters=function(e,n){var r=this.ID,i=this.FilterList,s=t(".ewSaveFilter[data-form="+r+"]"),o=t(".ewDeleteFilter[data-form="+r+"]"),u=o.parent("li").toggleClass("dropdown-submenu",!!n.length).toggleClass("disabled",!n.length),a=s.parent("li").toggleClass("disabled",!i),f=t(e.target);a.off("click.ew").on("click.ew",function(e){return ewr_Prompt(ewLanguage.Phrase("EnterFilterName"),function(e){n[n.length]=[e,i],t.localStorage.set(r+"_filters",n)},!0),!1}).prevAll().remove(),o.next("ul.dropdown-menu").remove();if(n.length){$menu=o.closest("ul.dropdown-menu"),$submenu=t("<ul class='dropdown-menu'></ul>");for(var l in n){if(!t.isArray(n[l]))continue;t("<li><a data-index='"+l+"' href='#'>"+n[l][0]+"</a></li>").on("click",function(e){var i=t(this).find("a[data-index]").data("index");return ewr_Prompt(ewLanguage.Phrase("DeleteFilterConfirm").replace("%s",n[i][0]),function(){delete n[i],t.localStorage.set(r+"_filters",n)}),!1}).appendTo($submenu),t("<li><a class='ewFilterList' data-index='"+l+"' href='#'>"+n[l][0]+"</a></li>").insertBefore(a).on("click",function(e){var r=t(this).find("a[data-index]").data("index");return t("<form>").attr({method:"post",action:location.href.split("?")[0]}).append(t("<input type='hidden'>").attr({name:"cmd",value:"resetfilter"}),t("<input type='hidden'>").attr({name:"token",value:EWR_TOKEN}),t("<input type='hidden'>").attr({name:"filter",value:JSON.stringify(n[r][1])})).appendTo("body").submit(),!1})}t("<li class='divider'></li>").insertBefore(a),u.append($submenu)}},this.Init=function(){var e=this,n=this.GetForm(),r=t(n);window.localStorage?t(".ewFilterOption."+this.ID+" .ewButtonDropdown").on("show.bs.dropdown",function(n){var r=t.localStorage.get(e.ID+"_filters")||[],i=t.grep(r,function(e){if(t.isArray(e)&&e.length==2)return e});e.SetupFilters(n,i)}):t(".ewFilterOption").hide();if(!n)return;this.CompileTemplates(),this.InitSearchPanel&&!ewr_HasFormData(n)&&t("#"+this.ID+"_SearchPanel").removeClass("in"),t(".ewSearchToggle[data-form="+this.ID+"]").on("click.bs.button",function(){t("#"+t(this).data("form")+"_SearchPanel").collapse("toggle")}),r.find("select[id^=so_]").each(function(){var e=t(this).change();e.val()!="BETWEEN"&&r.find("#so2_"+this.id.substr(2)).change()}),this.UpdateOpts(),this.$Element.is("form")&&r.submit(function(t){return e.Submit()}),this.$Element.data("form",this)},ewrForms[this.ID]=this}function ewr_Prompt(e,t,n){var r=jQuery,i=r("#ewrPrompt"),s=i.find(".modal-body").empty();n?(s.append('<div class="form-group"><label class="control-label">'+e+"</label>"+'<input type="text" class="form-control" style="display: block; width: 100%;"></div>'),$input=s.find("input").click(function(){$input.parent().removeClass("has-error")}),i.find(".modal-footer .btn-primary").unbind().click(function(e){var n=r.trim($input.val());n==""?($input.parent().addClass("has-error"),$input[0].focus()):(i.modal("hide"),r.isFunction(t)&&t(n))}),i.on("shown.bs.modal",function(e){$input[0].focus()})):(s.append("<div>"+e+"</div>"),i.find(".modal-footer .btn-primary").unbind().click(function(e){i.modal("hide"),r.isFunction(t)&&t()})),i.modal("show")}function ewr_GetForm(e){var t=jQuery,n=t(e),r=n.closest(".ewForm");return r[0]||(r=n.closest(".ewGrid").find(".ewForm")),r[0]}function ewr_HasFormData(e){var t=jQuery,n=t(e).find("[name^=sv_][value!=''][value!='{value}'],[name^=sv2_][value!=''][value!='{value}']").get();for(var r=0,i=n.length;r<i;r++){var s=n[r];if(/^(so|so2)_/.test(s.name)){if(/^IS/.test(t(s).val()))return!0}else if(s.type=="checkbox"||s.type=="radio"){if(s.checked)return!0}else if(s.type=="select-one"||s.type=="select-multiple"){for(var o=0,u=s.options.length;o<u;o++)if(s.options[o].selected&&s.options[o].value!=""&&s.options[o].value!="##all##")return!0}else if(s.type=="text"||s.type=="hidden"||s.type=="textarea")return!0}return!1}function ewr_UpdateOpt(e,t,n,r){var i=jQuery,s=this,o=i(this),u=function(){o.dequeue()};if(!e||e.length==0)return u();var a=this.Form?this.Form:this.form?this.form:null;this.form&&/^x\d+_/.test(this.id)&&(a=ewr_GetForm(this));if(!a)return u();var f=this.Form?this:ewrForms[a.id];if(!f)return u();var l=i.makeArray(arguments);if(this.form&&i.isArray(e)&&i.isString(e[0])){for(var c=0,h=e.length;c<h;c++)o.queue(i.proxy(ewr_UpdateOpt,s,e[c],t,n,r));var p=f.Lists[this.id.replace(/^[xy]\d*_/,"x_")];return u()}i.isString(e)&&(e=ewr_GetElements(e,a));var d=ewr_GetOptValues(e),v=ewr_GetId(e,!1);if(!v)return u();var m=v.replace(/^([xy])(\d*)_/,"x_"),g=RegExp.$1,y=RegExp.$2,b=[];if(i.isUndefined(t)){t=f.Lists[m].ParentFields.slice();if(y!="")for(var c=0,h=t.length;c<h;c++)t[c]=t[c].replace(/^x_/,"x"+y+"_");else g=="y"}if(i.isArray(t)&&t.length>0)if(i.isArray(t[0]))b=t;else if(i.isString(t[0]))for(var c=0,h=t.length;c<h;c++)b[b.length]=ewr_GetOptValues(t[c],a);ewr_IsAutoSuggest(e)||ewr_ClearOpt(e);var w=function(t){for(var n=0,s=t.length;n<s;n++){var o={data:t[n],parents:b,valid:!0,name:ewr_GetId(e),form:a};i(document).trigger("addoption",[o]),o.valid&&ewr_NewOpt(e,t[n],a)}!e.options&&e.length&&(ewr_RenderOpt(e),e=ewr_GetElements(v,a)),ewr_SelectOpt(e,d),r!==!1&&i(e).first().change()};i.isUndefined(n)&&(n=f.Lists[m].Ajax);if(!i.isBoolean(n)){var E=f.Lists[m].Options;return w(E),/s(ea)?rch$/.test(a.id)&&g=="x"&&(l[0]=v.replace(/^x_/,"y_"),ewr_UpdateOpt.apply(this,l)),u()}var S=ewr_GetId(e),x=i(a).find("#s_"+S).val();if(!x)return u();x+="&type=updateopt&name="+S,ewr_IsAutoSuggest(e)&&this.Form&&(x+="&v0="+encodeURIComponent(d[0]));for(var c=0,T=b.length;c<T;c++)x+="&v"+(c+1)+"="+encodeURIComponent(b[c].join(","));x+="&token="+EWR_TOKEN,i.ajax(EWR_LOOKUP_FILE_NAME,{type:"POST",dataType:"json",data:x,async:n,success:function(e){w(e||[])}}).always(function(){u()}),/s(ea)?rch$/.test(a.id)&&g=="x"&&(l[0]=v.replace(/^x_/,"y_"),ewr_UpdateOpt.apply(this,l))}function ewr_ClearOpt(e){if(e.options){var t=1;for(var n=e.length-1;n>=t;n--)e.options[n].value.substr(0,2)!="@@"&&(e.options[n]=null)}else if(e.length){var r=jQuery,i=ewr_GetId(e),s=ewr_GetElement("dsl_"+i,e[0].form);r(s).data("options",[]).find("div").first().empty();var o=ewr_GetElements(i,s);for(var n=0;n<o.length;n++){var u=o[n],a=u.value;if(a.substr(0,2)=="@@"){var f=ewrDom.getAncestorBy(u,function(e){return ewr_SameText(e.tagName,"LABEL")}),l=f?f.innerHTML.replace(/<[^>]*>/g,""):a;ewr_NewOpt(e,[a,l],u.form)}}}else if(ewr_IsAutoSuggest(e)){var c=ewr_GetAutoSuggest(e);c._options=[],c.input.value="",e.value=""}}function ewr_GetId(e,t){var n=jQuery,r="";return n.isString(e)?r=e:r=n(e).attr("name")||n(e).attr("id"),t!==!1&&/\[\]$/.test(r)&&(r=r.substr(0,r.length-2)),r}function ewr_GetOptValues(e,t){var n=jQuery,r=n.isString(e)?ewr_GetElements(e,t):e;return r.options?n(r).find("option:selected[value!='']").map(function(){return this.value}).get():n.isNumber(r.length)?n(r).filter(":checked[value!='{value}']").map(function(){return this.value}).get():[r.value]}function ewr_GetElements(e,t){var n=jQuery,t=n.isString(t)?"#"+t:t,r="[name='"+e+"']";r="input"+r+",select"+r+",textarea"+r+",button"+r;var i=t?n(t).find(r):n(r);return i.length==1&&i.is(":not(:checkbox):not(:radio)")?i[0]:i.get()}function ewr_NewOpt(e,t,n){var r=jQuery,i=ewrForms[n.id],s=ewr_GetId(e),o=ewr_GetId(e,!1),u,a=t[0],f={lf:t[0],df1:t[1],df2:t[2],df3:t[3],df4:t[4]};i.Lists(o).Template&&!ewr_IsAutoSuggest(e)?u=i.Lists(o).Template.render(f):u=ewr_DisplayValue(t,e)||a;var l={data:f,name:s,form:n.$Element,value:a,text:u};if(e.options)r.extend(l,{option:r("<option/>").val(l.value).html(l.text)}),r(document).trigger("newoption",[l]),r(e).append(l.option);else if(e.length){var c=r(ewr_GetElement("dsl_"+s,n)),h=c.data("options");c[0]&&h&&(h[h.length]={val:l.value,lbl:l.text})}else if(ewr_IsAutoSuggest(e)){var p=ewr_GetAutoSuggest(e);p._options[p._options.length]={val:l.value,lbl:l.text}}return l.text}function ewr_RenderOpt(e){var t=jQuery,n=ewr_GetId(e),r=ewr_GetForm(e),i=t(e).parent().parent().find("#dsl_"+n);if(!i[0]||!i.data("options"))return;var s=i.parent().find("#tp_"+n);if(!s[0])return;var o=EWR_IS_MOBILE?1:parseInt(i.data("repeatcolumn"),10)||5,u=s.contents(),a=i.data("options"),f=u.attr("type"),l=i.prevAll(".dropdown-toggle"),c=i.prevAll(".ewDropdownListClear");if(a&&a.length){if(o>1||f=="checkbox"||!l[0]){var h=t('<table class="ewItemTable"></table>');f=="checkbox"&&h.click(function(e){e.stopPropagation()});for(var p=0,d=a.length;p<d;p++){p%o==0&&($tr=t("<tr></tr>"));var v=u.clone(!0).val(a[p].val).click(function(e){if(l[0]){var n=h.find("input[name='"+this.name+"']:checked"),r=n.map(function(){return t(this).parent().text()}).get(),i=r.length>(t(this).data("maxcount")||3)?ewLanguage.Phrase("CountSelected").replace("%s",r.length):r.join(", ");l.html(r.length?i:ewLanguage.Phrase("PleaseSelect")),c.toggle(r.length>0)}}),m=t('<label class="'+f+'-inline"></label>').append(v.attr("id",v.attr("id")+"_"+p),a[p].lbl),g={name:n,form:r,value:a[p].val,text:a[p].lbl,option:m};t(document).trigger("newoption",[g]),t("<td></td>").append(g.option).appendTo($tr);if(p%o==o-1)h.append($tr);else if(p==d-1){for(var y=p%o+1;y<o;y++)$tr.append("<td></td>");h.append($tr)}}i.find("div").first().append(h)}else{var b=t('<div class="list-group"></div>');for(var p=0,d=a.length;p<d;p++){var v=u.clone(!0).val(a[p].val).click(function(e){var n=t(this).closest(".list-group-item");n.hasClass("active")&&(this.checked=!1),n.siblings(".list-group-item").removeClass("active"),n.toggleClass("active",this.checked),l.html(this.checked?n.text():ewLanguage.Phrase("PleaseSelect")),c.toggle(this.checked)}),m=t('<label class="'+f+'-inline"></label>').append(v.attr("id",v.attr("id")+"_"+p),a[p].lbl),w=t('<a class="list-group-item" href="#"></a>').append(m),g={name:n,form:r,value:a[p].val,text:a[p].lbl,option:w};t(document).trigger("newoption",[g]),b.append(g.option)}i.find("div").first().append(b)}var E=t.trim(l.html());c.toggle(!!E&&E!=ewLanguage.Phrase("PleaseSelect")).off().click(function(e){i.find("[data-field]:radio,[data-field]:checkbox").prop("checked",!1),i.find(".list-group-item.active").removeClass("active"),l.html(ewLanguage.Phrase("PleaseSelect")),c.hide()})}i.data("options",[])}function ewr_ValueSeparator(e,t){var n=jQuery,r=n(t).data("value-separator");return n.isArray(r)?r[e-1]:r||", "}function ewr_DisplayValue(e,t){var n=jQuery,r=e[1];for(var i=2;i<=4;i++)if(e[i]&&e[i]!=""){var s=ewr_ValueSeparator(i-1,t);if(n.isUndefined(s))break;r!=""&&(r+=s),r+=e[i]}return r}function ewr_SelectOpt(e,t){function u(e){if(!n(e).data("autoselect"))return!1;var t=ewr_GetForm(e);if(t){if(/s(ea)?rch$/.test(t.id))return!1;var r=e.id.replace(/^([xy])(\d*)_/,"x_");return r in ewrForms[t.id].Lists&&ewrForms[t.id].Lists[r].ParentFields.length==0?!1:!0}return!1}if(!e||!t||t.length==0)return;var n=jQuery,r=n(e);if(e.options)r.val(t),e.type=="select-one"&&e.selectedIndex==-1&&(e.selectedIndex=0);else if(e.length)e.length==1&&e[0].type=="checkbox"&&e[0].value!="{value}"?e[0].checked=ewr_ConvertToBool(e[0].value)===ewr_ConvertToBool(t[0]):r.val(t).closest(".ewDropdownList").find(".ewDropdownListClear").show();else if(ewr_IsAutoSuggest(e)&&t.length==1){var i=ewr_GetAutoSuggest(e);for(var s=0,o=i._options.length;s<o;s++)if(i._options[s].val==t[0]){e.value=i._options[s].val,i.input.value=i._options[s].lbl;break}}else e.type&&(e.value=t.join(","));if(e.options)e.type=="select-one"&&e.options.length==2&&!e.options[1].selected&&u(e)?e.options[1].selected=!0:e.type=="select-multiple"&&e.options.length==1&&!e.options[0].selected&&u(e)&&(e.options[0].selected=!0);else if(e.length)e.length==2&&u(e[1])&&(e[1].checked=!0);else if(ewr_IsAutoSuggest(e)){var i=ewr_GetAutoSuggest(e);i._options.length==1&&u(e)&&(e.value=i._options[0].val,i.input.value=i._options[0].lbl)}}function ewr_AutoSuggest(e){var t=this,n=jQuery,r=e.id,i=e.form,s=e.forceSelect,o=r.replace(/^[xy](\d*|\$rowindex\$)_/,"x_"),u=RegExp.$1,a={typeahead:{}};if(u=="$rowindex$")return a;var f=i.GetForm(),l=ewr_GetElement("sx_"+r,f);if(!l)return a;var c=ewr_GetElement("sc_"+r,f),h=ewr_GetElement("q_"+r,f),p=i.Lists[o].ParentFields.slice();for(var d=0,v=p.length;d<v;d++)p[d]=p[d].replace(/^x_/,"x"+u+"_");this.input=l,this.element=ewr_GetElement(r,f),this.highlight=!0,this.hint=!0,this.minLength=1,this.limit=EWR_AUTO_SUGGEST_MAX_ENTRIES,this.templates={},this._options=[];var m=n(this.input),g=n(this.element);this.$input=m,this.$element=g,m.val()&&g.val()&&this._options.push({val:g.val(),lbl:m.val()}),this.formatResult=function(e){return ewr_DisplayValue(e,this.element)||e[0]},this.setValue=function(e){e=e||m.val();var t=m.data("results")?n.map(m.data("results"),function(t,n){if(t["value"]==e)return n}):[];if(t.length==0){if(this._options&&this._options.length&&this._options[this._options.length-1].lbl==e)return;if(s&&e){m.typeahead("val","").attr("placeholder",ewLanguage.Phrase("ValueNotExist")).parent().append('<span class="glyphicon glyphicon-warning-sign form-control-feedback"></span>').addClass("has-error has-feedback"),g.val("").change();return}}else if(!/s(ea)?rch$/.test(f.id)||s){var r=t[0];r>-1&&(e=m.data("results")[r][0])}e!==g.val()&&g.val(e).change()},this.generateRequest=function(){var e=h.value;if(p.length>0)for(var t=0,n=p.length;t<n;t++){var r=ewr_GetOptValues(p[t],f);e+="&v"+(t+1)+"="+encodeURIComponent(r.join(","))}return"ajax=autosuggest&name="+this.element.name+"&"+e},m.on("typeahead:selected",function(e,n){t.setValue(n.value)}).blur(function(e){var n=m.data("ttTypeahead");if(n&&n.dropdown.isOpen&&!n.dropdown.isEmpty){var r=m.data("ttTypeahead").dropdown._getCursor().index();if(r>-1){var i=m.data("results")[r][1];m.typeahead("val",i)}}t.setValue()}).focus(function(e){m.attr("placeholder",m.data("placeholder")).closest(".has-error.has-feedback").removeClass("has-error has-feedback").find(".form-control-feedback").remove()}),g.data("autosuggest",this),n(function(){var s={datumTokenizer:function(e){return Bloodhound.tokenizers.whitespace(e.value)},queryTokenizer:Bloodhound.tokenizers.whitespace,limit:t.limit,remote:{url:EWR_LOOKUP_FILE_NAME,replace:function(e,n){return this.ajax.data=t.generateRequest(),e+"?q="+encodeURIComponent(n)+"&rnd="+ewr_Random()},ajax:{type:"POST",data:t.generateRequest()},filter:function(e){m.data("results",e||[]);var r=n.map(m.data("results"),function(e){var n=e.value=t.formatResult(e);return{lf:e[0],df1:e[1],df2:e[2],df3:e[3],df4:e[4],value:n}});return r}}};g.trigger("bloodhound",[s]),t.engine=new Bloodhound(s),t.engine.initialize();if(i.Lists[o].Template){var u=i.Lists[o].Template;t.templates.suggestion=n.proxy(u.render,u)}var a=[{highlight:t.highlight,minLength:t.minLength,hint:t.hint},{name:i.ID+"-"+r,source:t.engine.ttAdapter(),templates:t.templates}];g.trigger("typeahead",[a]),m.typeahead.apply(m,a),m.off("blur.tt"),t.typeahead=m.data("ttTypeahead"),t.typeahead.$node.css("display","").addClass("ewAutoSuggest");var f=t.typeahead.dropdown.$menu.css("z-index",9001);e.minWidth&&f.css("min-width",e.minWidth),e.maxHeight&&f.find("div:first").css({"max-height":e.maxHeight,"overflow-y":"auto"})})}function ewr_GetElement(e,t){var n=jQuery,t=n.isString(t)?"#"+t:t,r="#"+e.replace(/([\$\[\]])/g,"\\$1")+",[name='"+e+"']";return t?n(t).find(r)[0]:n(r).first()[0]}function ewr_SameText(e,t){return String(e).toLowerCase()==String(t).toLowerCase()}function ewr_SameStr(e,t){return String(e)==String(t)}function ewr_InArray(e,t){if(!t)return-1;for(var n=0,r=t.length;n<r;n++)if(ewr_SameStr(t[n],e))return n;return-1}function ewr_Get(e,t){t=t||window.location.search;var n=/(?:\?|&)([^&=]+)=?([^&]*)/g,r=/\+/g,i=function(e){return decodeURIComponent(e.replace(r," "))},s={},o;while(o=n.exec(t)){var u=i(o[1]),a=i(o[2]);u.substring(u.length-2)==="[]"&&(u=u.substring(0,u.length-2)),(s[u]||(s[u]=[])).push(a)}return s[e]}function ewr_SetLanguage(e){var t=jQuery,n=t(e),r=n.val()||n.data("language");if(!r)return;var i=window.location.href;if(window.location.search){var s=window.location.search,o={};s.replace(/(?:\?|&)([^&=]*)=?([^&]*)/g,function(e,t,n){t&&(o[t]=n)}),o.language=encodeURIComponent(r);var u="?";for(var a in o)u+=a+"="+o[a]+"&";u=u.substr(0,u.length-1);var f=i.lastIndexOf(window.location.search);i=i.substr(0,f)+u}else i+="?language="+encodeURIComponent(r);window.location=i}function ewr_Sort(e,t,n){return n==2&&e.ctrlKey&&(t+="&ctrl=1"),location=t,!0}function ewr_IsAutoSuggest(e){var t=jQuery,n=t(e);return e&&n.is(":text:hidden")&&n.data("typeahead")}function ewr_GetAutoSuggest(e){return ewrForms(e).AutoSuggests[e.id]}function ewr_Alert(e,t,n){var r=jQuery;if(EWR_IS_MOBILE)alert(e),t&&r.later(100,null,t);else{var i=r("#ewrMsgBox");i.find(".modal-body").html('<p class="text-'+(n||"danger")+'">'+e+"</p>"),i.modal("show"),t&&i.off("hidden.bs.modal").on("hidden.bs.modal",t)}}function ewr_OnError(e,t,n){if(t.jquery){var r=t.attr("type");t=r=="checkbox"||r=="radio"?t.get():t[0]}return ewr_Alert(n,function(){ewr_SetFocus(t)}),!1}function ewr_SetFocus(e){if(!e)return;var t=jQuery,n=t(e);!e.options&&e.length?e=n.filter("[value!='{value}']")[0]:ewr_IsAutoSuggest(e)&&(e=ewr_GetAutoSuggest(e).input);var r=n.closest(".form-group").addClass("has-error");n.focus().select().one("click keypress",function(){r.removeClass("has-error")})}function ewr_HasValue(e){return ewr_GetOptValues(e).join("")!=""}function ewr_HtmlEncode(e){var t=e;return t=t.replace(/&/g,"&amp"),t=t.replace(/\"/g,"&quot;"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;"),t}function ewr_ClearForm(e){var t=jQuery;t(e).find("[id^=sv_],[id^=sv2_]").each(function(){if(this.type=="checkbox"||this.type=="radio")this.checked=!1;else if(this.type=="select-one")this.selectedIndex=0;else if(this.type=="select-multiple")t(this).find("option").prop("selected",!1);else if(this.type=="text"||this.type=="textarea")this.value="",ewr_IsAutoSuggest(this)&&(ewr_GetAutoSuggest(this).input.value="")})}function ewr_StopPropagation(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function ewr_SetupTable(e,t,n){var r=jQuery,i=r(t),s=r(t.rows);if(!t||!t.rows||!n&&i.data("isset")||t.tBodies.length==0)return;var o=s.filter("[data-rowindex=1]").length||s.filter("[data-rowindex=0]").length||1,u=s.filter(":not(."+EWR_ITEM_TEMPLATE_CLASSNAME+"):not(:hidden)").each(function(){r(this.cells).removeClass(EWR_TABLE_LAST_ROW_CLASSNAME).last().addClass(EWR_TABLE_LAST_COL_CLASSNAME)}).get(),a=i.parentsUntil(".ewGrid",".table-responsive")[0];if(u.length)for(var f=1;f<=o;f++){var l=u[u.length-f];r(l.cells).each(function(){this.rowSpan==f&&r(this).addClass(EWR_TABLE_LAST_ROW_CLASSNAME).toggleClass(EWR_TABLE_BORDER_BOTTOM_CLASSNAME,!!a&&a.offsetHeight>t.offsetHeight)})}ewr_SetupGrid(e,i.closest("."+EWR_GRID_CLASSNAME)[0],n),i.data("isset",!0)}function ewr_SetupGrid(e,t,n){var r=jQuery,i=r(t);if(!t||!n&&i.data("isset"))return;i.find(".ewGridUpperPanel, .ewGridLowerPanel").each(function(){var e=r(this);e.text().trim()||e.hide()});var s=i.find("table."+EWR_TABLE_CLASSNAME+" > tbody:first > tr").length;s==0&&!i.find(".ewGridUpperPanel, .ewGridLowerPanel")[0]&&i.hide(),i.find(".ewGridUpperPanel")[0]||i.css({"border-top-left-radius":0,"border-top-right-radius":0}),i.find(".ewGridLowerPanel")[0]||i.css({"border-bottom-left-radius":0,"border-bottom-right-radius":0}),i.data("isset",!0)}function ewr_DragStart(e,t){var n=jQuery,r=n(this),i=n("body");t.limit=i.offset(),t.limit.bottom=t.limit.top+i.outerHeight()-r.outerHeight(),t.limit.right=t.limit.left+i.outerWidth()-r.outerWidth()}function ewr_Drag(e,t){var n=jQuery,r=n(this),i=n("body"),s=parseInt(r.css("margin-left"),10),o=parseInt(r.css("margin-top"),10),u=r.outerWidth()>i.outerWidth()?Math.max(t.limit.left-s,t.offsetX-s):Math.min(t.limit.right-s,Math.max(t.limit.left-s,t.offsetX-s)),a=r.outerHeight()>i.outerHeight()?Math.max(t.limit.top-o,t.offsetY-o):Math.min(t.limit.bottom-o,Math.max(t.limit.top-o,t.offsetY-o));r.css({top:a,left:u})}function ewr_EmailDialogShow(e){var t=jQuery,n=ewrEmailDialog||t("#ewrEmailDialog");if(!n)return;var r=n.find(".modal-body form").data("args",e),i=r.data("form");i||(i=new ewr_Form(r.attr("id")),i.Validate=function(){var e,t=this.GetForm();return e=t.elements.sender,e&&!ewr_HasValue(e)?this.OnError(e,ewLanguage.Phrase("EnterSenderEmail")):e&&!ewr_CheckEmailList(e.value,1)?this.OnError(e,ewLanguage.Phrase("EnterProperSenderEmail")):(e=t.elements.recipient,e&&!ewr_HasValue(e)?this.OnError(e,ewLanguage.Phrase("EnterRecipientEmail")):e&&!ewr_CheckEmailList(e.value,EWR_MAX_EMAIL_RECIPIENT)?this.OnError(e,ewLanguage.Phrase("EnterProperRecipientEmail")):(e=t.elements.cc,e&&!ewr_CheckEmailList(e.value,EWR_MAX_EMAIL_RECIPIENT)?this.OnError(e,ewLanguage.Phrase("EnterProperCcEmail")):(e=t.elements.bcc,e&&!ewr_CheckEmailList
(e.value,EWR_MAX_EMAIL_RECIPIENT)?this.OnError(e,ewLanguage.Phrase("EnterProperBccEmail")):(e=t.elements.subject,e&&!ewr_HasValue(e)?this.OnError(e,ewLanguage.Phrase("EnterSubject")):!0))))},i.Submit=function(){var e=this.GetForm(),r=t(e),i=r.data("args"),s=ewr_GetOptValues("contenttype",e);if(i.url&&i.exportid&&s=="html"){if(!this.Validate())return!1;n.modal("hide"),ewr_ExportCharts(i.el,i.url,i.exportid,e)}else{var o=r.serialize();o+="&token="+EWR_TOKEN,t.post(e.action,o,function(e){ewr_ShowMessage(e)}),n.modal("hide")}return!1},r.data("form",i)),n.modal("hide").find(".modal-title").html(e.hdr),n.find(".modal-footer .btn-primary").unbind().click(function(e){e.preventDefault(),i.Submit()&&n.modal("hide")}),ewrEmailDialog=n.modal("show")}function ewr_Ajax(e,t,n){if(!e)return undefined;var r=jQuery,i={s:e};i=r.extend(i,r.isObject(t)?t:{q:t});if(!r.isFunction(n)){var s=r.ajax({async:!1,type:"POST",data:i}).responseText,o=r.parseJSON(s);return o.length==1?(o=o[0],r.isArray(o)&&o.length==1?o[0]:o):o}r.post(EWR_LOOKUP_FILE_NAME,i,n,"json")}function ewr_ShowDrillDown(e,t,n,r,i){if(e?e.ctrlKey:window._ctrlKey)return ewr_Redirect(n.replace("?d=1&","?d=2&")),!1;var s=jQuery,o=s.isString(t)?"top":"bottom",u=s.isString(t)?s("#"+t):s(t);u.tooltip("hide");var a={obj:u[0],id:r,url:n,hdr:i};s(document).trigger("drilldown",[a]);var f=a.url.split("?");a.file=f[0]?f[0]:"",a.data=f[1]?f[1]:"",a.data+=(a.data!=""?"&":"")+"token="+EWR_TOKEN,u.data("bs.popover")||u.popover({html:!0,placement:o,trigger:"manual",template:'<div class="popover"><h3 class="popover-title" style="cursor: move;"></h3><div class="popover-content"></div><div class="ewResizeHandle"></div></div>',content:'<div class="ewrLoading"><div class="ewSpinner"><div></div></div> '+ewLanguage.Phrase("Loading").replace("%s","")+"</div>",container:s("#ewrDrillDownPanel")}).on("show.bs.popover",function(e){u.attr("data-original-title","")}).on("shown.bs.popover",function(e){if(!u.data("args"))return;s.ajax({cache:!1,dataType:"html",type:"POST",data:u.data("args").data,url:u.data("args").file,success:function(e){var t=u.data("bs.popover").tip().drag("start",ewr_DragStart).drag(ewr_Drag,{handle:".popover-title"});a.hdr&&t.find(".popover-title").empty().show().append('<button type="button" class="close" aria-hidden="true">&times;</button>'+a.hdr).find(".close").click(function(){u.popover("hide")});var n=/<body[^>]*>([\s\S]*?)<\/body\s*>/i;e.match(n)&&(e=RegExp.$1);var i=ewr_StripScript(e),s=t.find(".popover-content").html(i);if(EWR_IS_MOBILE){var o=s.find("#ewContainer")[0];o&&s.empty().append(o)}s.find(".ewTable").each(ewr_SetupTable),ewr_ExecScript(e,r)},error:function(e){if(e.responseText){var t=$el.data("bs.popover").tip();t.find(".popover-content").empty().append('<p class="text-error">'+e.responseText+"</p>")}}})}).on("hidden.bs.popover",function(e){for(var t=0;t<ewrDrillCharts.length;t++){var n=FusionCharts(ewrDrillCharts[t]);n.dispose()}ewrDrillCharts=[],ewr_RemoveScript(r)}),u.data("args",a).popover("show")}function ewr_ExecScript(e,t){var n,r=0,i=/<script([^>]*)>([\s\S]*?)<\/script\s*>/ig;while((n=i.exec(e))!=null){var s=RegExp.$2;s!=""&&!/ewr_Get(Css|Script)/i.test(s)&&/(\s+type\s*=\s*['"]*(text|application)\/(java|ecma)script['"]*)|^((?!\s+type\s*=).)*$/i.test(RegExp.$1)&&ewr_AddScript(s,"scr_"+t+"_"+r++)}}function ewr_StripScript(e){var t,n=/<script([^>]*)>([\s\S]*?)<\/script\s*>/ig,r=e;while((t=n.exec(e))!=null){var i=RegExp.lastMatch;/(\s+type\s*=\s*['"]*(text|application)\/(java|ecma)script['"]*)|^((?!\s+type\s*=).)*$/i.test(RegExp.$1)&&(r=r.replace(i,""))}return r}function ewr_AddScript(e,t){var n=document.createElement("SCRIPT");return t&&(n.id=t),n.type="text/javascript",n.text=e,document.body.appendChild(n)}function ewr_RemoveScript(e){e&&jQuery("script[id^='scr_"+e+"_']").remove()}function ewr_Language(e){this.obj=e,this.Phrase=function(e){return this.obj[e.toLowerCase()]}}function ewr_ApplyTemplate(e,t,n,r,i){var s=jQuery,o=s("#"+t);if(!s.views||!o[0])return;s("span[data-class^=tp],div[data-class^=tp]").html(function(){var e=s(this);return'<script type="text/html" class="'+n+'" id="'+e.data("class")+'">'+e.html()+"</scr"+"ipt>"}),o.attr("type")||o.attr("type","text/html");var u={data:i||{},id:e,template:t,enabled:!0};s(document).trigger("rendertemplate",[u]),u.enabled&&s("#"+e).html(o.render(u.data)),r&&r!="print"&&s(function(){var t=s("meta[http-equiv='Content-Type']"),i="<html><head>";t[0]&&(i+="<meta http-equiv='Content-Type' content='"+t.attr("content")+"'>"),r=="pdf"?i+="<link rel='stylesheet' type='text/css' href='"+EWR_PDF_STYLESHEET_FILENAME+"'>":i+="<style>"+s.ajax({async:!1,type:"GET",url:EWR_PROJECT_STYLESHEET_FILENAME}).responseText+"</style>",i+="</head><body>",s("span.ewChartTop").each(function(){i+=s(this).html()}),i+=s("#"+e).find('div[id^="ct_"]').html(),s("span.ewChartBottom").each(function(){i+=s(this).html()}),i+="</body></html>";var o=window.location.href.split("?")[0];if(r=="email"){var u=window.location.search.replace(/^\?/,"")+"&"+s.param({customexport:r,data:i,filename:n});u+="&token="+EWR_TOKEN,s.post(o,u,function(e){ewr_ShowMessage(e)})}else s("<form>").attr({method:"post",action:o}).append(s("<input type='hidden'>").attr({name:"customexport",value:r}),s("<input type='hidden'>").attr({name:"data",value:i}),s("<input type='hidden'>").attr({name:"filename",value:n})).appendTo("body").submit();window.location!=window.parent.location&&window.parent.jQuery&&window.parent.jQuery("body").css("cursor","default")})}function ewr_RenderTemplate(e){var t=jQuery,n=t("#"+e);if(!t.views||!n[0])return;n.attr("type")||n.attr("type","text/html");var r={data:{},template:e};return t(document).trigger("rendertemplate",[r]),n.render(r.data)}function ewr_ShowMessage(e){if(window.location!=window.parent.location&&parent.ewr_ShowMessage)return parent.ewr_ShowMessage(e);var t=jQuery,n=t("div.ewMessageDialog:first"),r=e||(n.length?EWR_IS_MOBILE?n.text():n.html():"");if(t.trim(r)=="")return;if(EWR_IS_MOBILE)alert(r);else{var i=t("#ewrMsgBox");i.find(".modal-body").html(r),i.modal("show")}}function ewr_Random(){return Math.floor(Math.random()*100001)+1e5}function ewr_ToggleSrchOpr(e,t){var n=this.form.elements[e];if(!n)return;n.value=n.value!=t?t:"="}function ewr_CheckUSDate(e){return ewr_CheckDateEx(e,"us",EWR_DATE_SEPARATOR)}function ewr_CheckShortUSDate(e){return ewr_CheckDateEx(e,"usshort",EWR_DATE_SEPARATOR)}function ewr_CheckDate(e){return ewr_CheckDateEx(e,"std",EWR_DATE_SEPARATOR)}function ewr_CheckShortDate(e){return ewr_CheckDateEx(e,"stdshort",EWR_DATE_SEPARATOR)}function ewr_CheckEuroDate(e){return ewr_CheckDateEx(e,"euro",EWR_DATE_SEPARATOR)}function ewr_CheckShortEuroDate(e){return ewr_CheckDateEx(e,"euroshort",EWR_DATE_SEPARATOR)}function ewr_CheckDateEx(e,t,n){if(e==null||e.length=="")return!0;while(e.indexOf("  ")>-1)e=e.replace(/  /g," ");e=e.replace(/^\s*|\s*$/g,"");var r=e.split(" ");if(r.length>0){var i,s,o,u;i=/^([0-9]{4})-([0][1-9]|[1][0-2])-([0][1-9]|[1|2][0-9]|[3][0|1])$/;if(ar=i.exec(r[0]))s=ar[1],o=ar[2],u=ar[3];else{var a="\\"+n;switch(t){case"std":i=new RegExp("^(\\d{4})"+a+"([0]?[1-9]|[1][0-2])"+a+"([0]?[1-9]|[1|2]\\d|[3][0|1])$");break;case"stdshort":i=new RegExp("^(\\d{2})"+a+"([0]?[1-9]|[1][0-2])"+a+"([0]?[1-9]|[1|2]\\d|[3][0|1])$");break;case"us":i=new RegExp("^([0]?[1-9]|[1][0-2])"+a+"([0]?[1-9]|[1|2]\\d|[3][0|1])"+a+"(\\d{4})$");break;case"usshort":i=new RegExp("^([0]?[1-9]|[1][0-2])"+a+"([0]?[1-9]|[1|2]\\d|[3][0|1])"+a+"(\\d{2})$");break;case"euro":i=new RegExp("^([0]?[1-9]|[1|2]\\d|[3][0|1])"+a+"([0]?[1-9]|[1][0-2])"+a+"(\\d{4})$");break;case"euroshort":i=new RegExp("^([0]?[1-9]|[1|2]\\d|[3][0|1])"+a+"([0]?[1-9]|[1][0-2])"+a+"(\\d{2})$")}if(!i.test(r[0]))return!1;var f=r[0].split(n);switch(t){case"std":case"stdshort":s=ewr_UnformatYear(f[0]),o=f[1],u=f[2];break;case"us":case"usshort":s=ewr_UnformatYear(f[2]),o=f[0],u=f[1];break;case"euro":case"euroshort":s=ewr_UnformatYear(f[2]),o=f[1],u=f[0]}}if(!ewr_CheckDay(s,o,u))return!1}return r.length>1&&!ewr_CheckTime(r[1])?!1:!0}function ewr_UnformatYear(e){return e.length==2?e>EWR_UNFORMAT_YEAR?"19"+e:"20"+e:e}function ewr_CheckDay(e,t,n){e=parseInt(e,10),t=parseInt(t,10),n=parseInt(n,10);var r=ewr_InArray(t,[4,6,9,11])>-1?30:31;return t==2&&(r=e%4>0||e%100==0&&e%400>0?28:29),ewr_CheckRange(n,1,r)}function ewr_CheckInteger(e){return!e||e.length==0?!0:e.indexOf(EWR_DECIMAL_POINT)>-1?!1:ewr_CheckNumber(e)}function ewr_CheckNumber(e){e=String(e);if(!e||e.length==0)return!0;e=e.replace(/^\s*|\s*$/g,"");var t=new RegExp("^[+-]?(\\d{1,3}("+(EWR_THOUSANDS_SEP?"\\"+EWR_THOUSANDS_SEP+"?":"")+"\\d{3})*(\\"+EWR_DECIMAL_POINT+"\\d+)?|\\"+EWR_DECIMAL_POINT+"\\d+)$");return t.test(e)}function ewr_StrToFloat(e){e=String(e);if(EWR_THOUSANDS_SEP!=""){var t=new RegExp("\\"+EWR_THOUSANDS_SEP,"g");e=e.replace(t,"")}return EWR_DECIMAL_POINT!=""&&(e=e.replace(EWR_DECIMAL_POINT,".")),parseFloat(e)}function ewr_StrToDate(e){var t=/^(\d{4})-([0][1-9]|[1][0-2])-([0][1-9]|[1|2]\d|[3][0|1]) (?:(0\d|1\d|2[0-3]):([0-5]\d):([0-5]\d))?$/,n=e.replace(t,"$1 $2 $3 $4 $5 $6").split(" ");return new Date(n[0],n[1]-1,n[2],n[3],n[4],n[5])}function ewr_CheckRange(e,t,n){if(!e||e.length==0)return!0;var r=jQuery;return(r.isNumber(t)||r.isNumber(n))&&ewr_CheckNumber(e)&&(e=ewr_StrToFloat(e)),!r.isNull(t)&&e<t?!1:!r.isNull(n)&&e>n?!1:!0}function ewr_CheckTime(e){if(!e||e.length==0)return!0;e=e.replace(/^\s*|\s*$/g,"");var t=/^(0\d|1\d|2[0-3]):[0-5]\d:[0-5]\d$/;return t.test(e)}function ewr_CheckPhone(e){if(!e||e.length==0)return!0;e=e.replace(/^\s*|\s*$/g,"");var t=/^\(\d{3}\) ?\d{3}( |-)?\d{4}|^\d{3}( |-)?\d{3}( |-)?\d{4}$/;return t.test(e)}function ewr_CheckZip(e){if(!e||e.length==0)return!0;e=e.replace(/^\s*|\s*$/g,"");var t=/^\d{5}$|^\d{5}-\d{4}$/;return t.test(e)}function ewr_CheckCreditCard(e){if(!e||e.length==0)return!0;var t=e.replace(/\D/g,"");if(t.length==0)return!1;var n=t.length%2==1?!1:!0,r,i=0;for(var s=0,o=t.length;s<o;s++)r=parseInt(t.charAt(s)),n?(r*=2,i+=r%10,r/10>=1&&i++,n=!1):(i+=r,n=!0);return i%10==0}function ewr_CheckSSC(e){if(!e||e.length==0)return!0;e=e.replace(/^\s*|\s*$/g,"");var t=/^(?!000)([0-6]\d{2}|7([0-6]\d|7[012]))([ -]?)(?!00)\d\d\3(?!0000)\d{4}$/;return t.test(e)}function ewr_CheckEmailList(e,t){if(!e||e.length==0)return!0;var n=e.replace(/,/g,";").split(";");for(var r=0,i=n.length;r<i;r++){if(t>0&&i>t)return!1;if(!ewr_CheckEmail(n[r]))return!1}return!0}function ewr_CheckEmail(e){if(!e||e.length==0)return!0;e=e.replace(/^\s*|\s*$/g,"");var t=/^[\w.%+-]+@[\w.-]+\.[A-Z]{2,18}$/i;return t.test(e)}function ewr_CheckGUID(e){if(!e||e.length==0)return!0;e=e.replace(/^\s*|\s*$/g,"");var t=/^\{\w{8}-\w{4}-\w{4}-\w{4}-\w{12}\}$/,n=/^\w{8}-\w{4}-\w{4}-\w{4}-\w{12}$/;return t.test(e)||n.test(e)}function ewr_CheckByRegEx(e,t){return!e||e.length==0?!0:e.match(t)?!0:!1}function ewr_Redirect(e,t,n){if(!n||n.toLowerCase()=="post"){var r=jQuery,i={},s=t?r(t):r("<form></form>").appendTo("body");s.attr({action:e.split("?")[0],method:"post"}),e+=(e.split("?").length>1?"&":"?")+"token="+EWR_TOKEN,e.replace(/(?:\?|&)([^&=]*)=?([^&]*)/g,function(e,t,n){t&&r('<input type="hidden">').attr({name:t,value:n}).appendTo(s)}),s.submit()}else window.location=e}function ewr_CreateCalendar(e,t){var n=jQuery,r=n(t),i=r.data("format"),s=n('<button type="button"><span class="glyphicon glyphicon-calendar"></span></button>').addClass("btn btn-default btn-sm").css({"font-size":r.css("font-size"),height:r.outerHeight()}),o={inputField:t,showsTime:/ %H:%M(:%S)?$/.test(i),ifFormat:i,button:s[0],cache:!0},u={el:t,enabled:!0,settings:o,language:EWR_LANGUAGE_ID};r.wrap('<div class="input-group"></div>').after(n('<span class="input-group-btn"></span>').append(s)),n(function(){n(document).trigger("calendar",[u]);if(!u.enabled)return;Calendar._DN||n.getScript(EWR_RELATIVE_PATH+"jscalendar/lang/calendar-"+(u.language||"en")+".js").fail(function(){n.getScript(EWR_RELATIVE_PATH+"jscalendar/lang/calendar-en.js")}),Calendar.setup(u.settings)})}function ewr_ParseNumber(e,t){var n=jQuery;if(n.isString(e)){t=t||{thousandsSeparator:EWR_THOUSANDS_SEP,decimalSeparator:EWR_DECIMAL_POINT};var r=[],i,s=t.thousandsSeparator,o=t.decimalSeparator;s&&r.push(s.replace(/[\-$\^*()+\[\]{}|\\,.?\s]/g,"\\$&")+"(?=\\d)"),i=new RegExp("(?:"+r.join("|")+")","g"),o==="."&&(o=null),e=e.replace(i,""),e=o?e.replace(o,"."):e}n.isString(e)&&n.trim(e)!==""&&(e=+e);if(!n.isNumber||!isFinite(e))e=null;return e}function ewr_FormatNumber(e,t){var n=jQuery;if(n.isNumber(e)){t=t||{thousandsSeparator:EWR_THOUSANDS_SEP,decimalSeparator:EWR_DECIMAL_POINT};var r=e<0,i=e+"",s=t.decimalPlaces,o=t.decimalSeparator||".",u=t.thousandsSeparator,a,f,l,c;n.isNumber(s)&&s>=0&&s<=20&&(i=e.toFixed(s)),o!=="."&&(i=i.replace(".",o));if(u){a=i.lastIndexOf(o),a=a>-1?a:i.length,f=i.substring(a);for(l=0,c=a;c>0;c--)l%3===0&&c!==a&&(!r||c>1)&&(f=u+f),f=i.charAt(c-1)+f,l++;i=f}return i}return n.isValue(e)&&e.toString?e.toString():""}function ewr_ParseDate(e,t){var n=jQuery,r=n.makeArray(arguments);if(n.isNumber(t)&&t>=0&&t<=17){var i,s=EWR_DEFAULT_DATE_FORMAT.toUpperCase(),o=EWR_DATE_SEPARATOR;switch(t){case 0:case 2:case 8:i=s+" HH:mm:ss";break;case 1:i="dddd, MMMM DD, YYYY";break;case 3:i="hh:mm:ss A";break;case 4:i="HH:mm:ss";break;case 5:case 9:i="YYYY"+o+"MM"+o+"DD HH:mm:ss";break;case 6:case 10:i="MM"+o+"DD"+o+"YYYY HH:mm:ss";break;case 7:case 11:i="DD"+o+"MM"+o+"YYYY HH:mm:ss";break;case 12:case 15:i="YY"+o+"MM"+o+"DD HH:mm:ss";break;case 13:case 16:i="MM"+o+"DD"+o+"YY HH:mm:ss";break;case 14:case 17:i="DD"+o+"MM"+o+"YY HH:mm:ss"}r[1]=[i,"YYYY-MM-DD HH:mm:ss"]}return moment.apply(this,r)}function ewr_FormatDate(e,t){return moment(e).format(t||EWR_DEFAULT_DATE_FORMAT.toUpperCase())}function ewr_Extend(e){e.extend({isBoolean:function(e){return typeof e=="boolean"},isNull:function(e){return e===null},isNumber:function(e){return typeof e=="number"&&isFinite(e)},isObject:function(e){return e&&(typeof e=="object"||this.isFunction(e))||!1},isString:function(e){return typeof e=="string"},isUndefined:function(e){return typeof e=="undefined"},isValue:function(e){return this.isObject(e)||this.isString(e)||this.isNumber(e)||this.isBoolean(e)},isDate:function(e){return this.type(e)==="date"&&e.toString()!=="Invalid Date"&&!isNaN(e)},later:function(e,t,n,r,i){e=e||0,t=t||{};var s=n,o=r,u,a;this.isString(n)&&(s=t[n]);if(!s)return;return!this.isUndefined(r)&&!this.isArray(o)&&(o=[r]),u=function(){s.apply(t,o||[])},a=i?setInterval(u,e):setTimeout(u,e),{interval:i,cancel:function(){this.interval?clearInterval(a):clearTimeout(a)}}}}),function(t){t.fn.drag=function(t,n,r){var i=typeof t=="string"?t:"",s=e.isFunction(t)?t:e.isFunction(n)?n:null;return i.indexOf("drag")!==0&&(i="drag"+i),r=(t==s?n:r)||{},s?this.bind(i,r,s):this.trigger(i)};var n=t.event,r=n.special,i=r.drag={defaults:{which:1,distance:0,not:":input",handle:null,relative:!1,drop:!0,click:!1},datakey:"dragdata",noBubble:!0,add:function(e){var n=t.data(this,i.datakey),r=e.data||{};n.related+=1,t.each(i.defaults,function(e,t){r[e]!==undefined&&(n[e]=r[e])})},remove:function(){t.data(this,i.datakey).related-=1},setup:function(){if(t.data(this,i.datakey))return;var e=t.extend({related:0},i.defaults);t.data(this,i.datakey,e),n.add(this,"touchstart mousedown",i.init,e),this.attachEvent&&this.attachEvent("ondragstart",i.dontstart)},teardown:function(){var e=t.data(this,i.datakey)||{};if(e.related)return;t.removeData(this,i.datakey),n.remove(this,"touchstart mousedown",i.init),i.textselect(!0),this.detachEvent&&this.detachEvent("ondragstart",i.dontstart)},init:function(e){if(i.touched)return;var s=e.data,o;if(e.which!=0&&s.which>0&&e.which!=s.which)return;if(t(e.target).is(s.not))return;if(s.handle&&!t(e.target).closest(s.handle,e.currentTarget).length)return;i.touched=e.type=="touchstart"?this:null,s.propagates=1,s.mousedown=this,s.interactions=[i.interaction(this,s)],s.target=e.target,s.pageX=e.pageX,s.pageY=e.pageY,s.dragging=null,o=i.hijack(e,"draginit",s);if(!s.propagates)return;o=i.flatten(o),o&&o.length&&(s.interactions=[],t.each(o,function(){s.interactions.push(i.interaction(this,s))})),s.propagates=s.interactions.length,s.drop!==!1&&r.drop&&r.drop.handler(e,s),i.textselect(!1),i.touched?n.add(i.touched,"touchmove touchend",i.handler,s):n.add(document,"mousemove mouseup",i.handler,s);if(!i.touched||s.live)return!1},interaction:function(e,n){var r=t(e)[n.relative?"position":"offset"]()||{top:0,left:0};return{drag:e,callback:new i.callback,droppable:[],offset:r}},handler:function(e){var s=e.data;switch(e.type){case!s.dragging&&"touchmove":e.preventDefault();case!s.dragging&&"mousemove":if(Math.pow(e.pageX-s.pageX,2)+Math.pow(e.pageY-s.pageY,2)<Math.pow(s.distance,2))break;e.target=s.target,i.hijack(e,"dragstart",s),s.propagates&&(s.dragging=!0);case"touchmove":e.preventDefault();case"mousemove":if(s.dragging){i.hijack(e,"drag",s);if(s.propagates){s.drop!==!1&&r.drop&&r.drop.handler(e,s);break}e.type="mouseup"};case"touchend":case"mouseup":default:i.touched?n.remove(i.touched,"touchmove touchend",i.handler):n.remove(document,"mousemove mouseup",i.handler),s.dragging&&(s.drop!==!1&&r.drop&&r.drop.handler(e,s),i.hijack(e,"dragend",s)),i.textselect(!0),s.click===!1&&s.dragging&&t.data(s.mousedown,"suppress.click",(new Date).getTime()+5),s.dragging=i.touched=!1}},hijack:function(e,r,s,o,u){if(!s)return;var a={event:e.originalEvent,type:e.type},f=r.indexOf("drop")?"drag":"drop",l,c=o||0,h,p,d,v=isNaN(o)?s.interactions.length:o;e.type=r,e.originalEvent=null,s.results=[];do if(h=s.interactions[c]){if(r!=="dragend"&&h.cancelled)continue;d=i.properties(e,s,h),h.results=[],t(u||h[f]||s.droppable).each(function(o,u){d.target=u,e.isPropagationStopped=function(){return!1},l=u?n.dispatch.call(u,e,d):null,l===!1?(f=="drag"&&(h.cancelled=!0,s.propagates-=1),r=="drop"&&(h[f][o]=null)):r=="dropinit"&&h.droppable.push(i.element(l)||u),r=="dragstart"&&(h.proxy=t(i.element(l)||h.drag)[0]),h.results.push(l),delete e.result;if(r!=="dropinit")return l}),s.results[c]=i.flatten(h.results),r=="dropinit"&&(h.droppable=i.flatten(h.droppable)),r=="dragstart"&&!h.cancelled&&d.update()}while(++c<v);return e.type=a.type,e.originalEvent=a.event,i.flatten(s.results)},properties:function(e,t,n){var r=n.callback;return r.drag=n.drag,r.proxy=n.proxy||n.drag,r.startX=t.pageX,r.startY=t.pageY,r.deltaX=e.pageX-t.pageX,r.deltaY=e.pageY-t.pageY,r.originalX=n.offset.left,r.originalY=n.offset.top,r.offsetX=r.originalX+r.deltaX,r.offsetY=r.originalY+r.deltaY,r.drop=i.flatten((n.drop||[]).slice()),r.available=i.flatten((n.droppable||[]).slice()),r},element:function(e){if(e&&(e.jquery||e.nodeType==1))return e},flatten:function(e){return t.map(e,function(e){return e&&e.jquery?t.makeArray(e):e&&e.length?i.flatten(e):e})},textselect:function(e){t(document)[e?"unbind":"bind"]("selectstart",i.dontstart).css("MozUserSelect",e?"":"none"),document.unselectable=e?"off":"on"},dontstart:function(){return!1},callback:function(){}};i.callback.prototype={update:function(){r.drop&&this.available.length&&t.each(this.available,function(e){r.drop.locate(this,e)})}};var s=n.dispatch;n.dispatch=function(e){if(t.data(this,"suppress."+e.type)-(new Date).getTime()>0){t.removeData(this,"suppress."+e.type);return}return s.apply(this,arguments)};var o=n.fixHooks.touchstart=n.fixHooks.touchmove=n.fixHooks.touchend=n.fixHooks.touchcancel={props:"clientX clientY pageX pageY screenX screenY".split(" "),filter:function(e,n){if(n){var r=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0]||null;r&&t.each(o.props,function(t,n){e[n]=r[n]})}return e}};r.draginit=r.dragstart=r.dragend=i}(e)}var ewrEmailDialog,ewrExportDialog,ewrPopups={},$rowindex$=null,ewrDrillCharts=[],ewrExporting=!1,ewrExportCharts=[],EWR_TABLE_CLASSNAME="ewTable",EWR_GRID_CLASSNAME="ewGrid",EWR_TABLE_ROW_CLASSNAME="ewTableRow",EWR_TABLE_ALT_ROW_CLASSNAME="ewTableAltRow",EWR_ITEM_TEMPLATE_CLASSNAME="ewTemplate",EWR_ITEM_TABLE_CLASSNAME="ewItemTable",EWR_TABLE_LAST_ROW_CLASSNAME="ewTableLastRow",EWR_TABLE_LAST_COL_CLASSNAME="ewTableLastCol",EWR_TABLE_BORDER_BOTTOM_CLASSNAME="ewTableBorderBottom",EWR_UNFORMAT_YEAR=50,EWR_POPUP_MINWIDTH=200,EWR_POPUP_MINHEIGHT=150,EWR_POPUP_DEFAULTHEIGHT=200,EWR_EMPTY_VALUE="##empty##",EWR_NULL_VALUE="##null##",ewr_ClientScriptInclude=jQuery.getScript,ewrLightboxSettings={transition:"none",photo:!0,opacity:.5},ewrForms={};jQuery(function(e){e("div.ewTableHeaderBtn").each(function(){var t=e(this),n=0;t.find(".ewTableHeaderSort:has(.caret), .ewTableHeaderPopup").each(function(){n+=e(this).width()}),n&&t.css(EWR_CSS_FLIP?"padding-left":"padding-right",n+4)}),ewr_InitIcons(),ewr_SetSessionTimer(),e.extend(ewrLightboxSettings,{title:ewLanguage.Phrase("LightboxTitle"),current:ewLanguage.Phrase("LightboxCurrent"),previous:ewLanguage.Phrase("LightboxPrevious"),next:ewLanguage.Phrase("LightboxNext"),close:ewLanguage.Phrase("LightboxClose"),xhrError:ewLanguage.Phrase("LightboxXhrError"),imgError:ewLanguage.Phrase("LightboxImgError")}),e(".ewLightbox").each(function(){var t=e(this);t.colorbox&&t.colorbox(e.extend({rel:t.data("rel")},ewrLightboxSettings))}),e("table."+EWR_TABLE_CLASSNAME).each(ewr_SetupTable),e("table."+EWR_GRID_CLASSNAME).each(ewr_SetupGrid),e.later(e(".ewChart").length*100,null,function(){var t=e(window),n=e("#ewContentTable"),r=e("body").height();n.css("min-height",n.outerHeight()),t.resize(function(){t.height()>r&&n.css("height",t.height()-(e("#ewHeaderRow").is(":hidden")?0:e("#ewHeaderRow").height())-(e("#ewMobileMenu").is(":hidden")?0:e("#ewMobileMenu").height())-(e("#ewMenuRow").is(":hidden")?0:e("#ewMenuRow").height())-(e("#ewFooterRow").is(":hidden")?0:e("#ewFooterRow").height()))}).triggerHandler("resize")}),e("input[name=pageno]").keypress(function(e){if(e.which==13){var t=window.location.href,n=t.lastIndexOf(window.location.search);return window.location=t.substr(0,n)+"?"+this.name+"="+parseInt(this.value),!1}}),e("input[data-calendar]").each(ewr_CreateCalendar),e(window).keydown(function(e){window._ctrlKey=e.ctrlKey}).keyup(function(e){window._ctrlKey=0}),e(".ewIframe").iframeAutoHeight(),(typeof EW_USE_JAVASCRIPT_MESSAGE=="undefined"||!EW_USE_JAVASCRIPT_MESSAGE)&&EWR_USE_JAVASCRIPT_MESSAGE&&ewr_ShowMessage()});var ewrEvent={on:ewr_On},ewrForms=function(e){if(e){var t=jQuery,n;t.isString(e)?n=e:n=t(ewr_GetForm(e)).attr("id");if(n)for(var r in this)if(r===n)return this[r]}return undefined};jQuery.sub||(jQuery.sub=function(){function e(t,n){return new e.fn.init(t,n)}jQuery.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(r,i){var s=jQuery.fn.init.call(this,r,i,t);return s instanceof e?s:e(s)},e.fn.init.prototype=e.fn;var t=e(document);return e}),function(){var e=jQuery.sub();e.fn.extend({row:function(){var e=this.closest(".ewRow");return e},visible:function(e){var t=this.closest(".ewCell");return typeof e!="undefined"?(t.toggle(e),this):t.is(":visible")},readonly:function(e){return typeof e!="undefined"?(this.prop("readOnly",e),this):this.prop("readOnly")},disabled:function(e){return typeof e!="undefined"?(this.prop("disabled",e),this):this.prop("disabled")},value:function(e){var t=this.attr("type");if(typeof e!="undefined"){jQuery.isArray(e)||(e=[e]);var t=this.attr("type"),n=t=="radio"||t=="checkbox"?this.get():this[0];return ewr_SelectOpt(n,e),this}return t=="checkbox"?ewr_GetOptValues(this.get()):t=="radio"?ewr_GetOptValues(this.get()).join():this.val()},toNumber:function(){return ewr_ParseNumber(this.value())},toDate:function(){return ewr_ParseDate(this.value(),this.data("format"))},toJsDate:function(){return ewr_ParseDate(this.value(),this.data("format")).toDate()}}),jQuery.fn.fields=function(t){var n=jQuery,r={},i=this.attr("id"),s=this[0],o,u;/^(sv|sv2)_/.test(i)?(o=ewr_GetForm(s),u=this.data("table")):s&&s.Form&&(o=s.$Element,u=s.ID.replace(new RegExp("^f|"+s.PageID+"$","g"),""));var a="[data-table="+u+"][data-field"+(t?"=x_"+t:"")+"]";return o&&a&&n(o).find(a).each(function(){var t=this.getAttribute("data-field").substr(2),n=this.getAttribute("name");t=/^sv2_/.test(n)?"y_"+t:t,r[t]=r[t]?r[t].add(this):e(this)}),t?r[t]:r}}(),ewr_Extend(jQuery),+function(e){"use strict";function i(r){if(r&&r.which===3)return;e(t).remove(),e(n,e(r.currentTarget).is(n)?e(r.currentTarget).parent():document).each(function(){var t=s(e(this)),n={relatedTarget:this};if(!t.hasClass("open"))return;t.trigger(r=e.Event("hide.bs.dropdown",n));if(r.isDefaultPrevented())return;t.removeClass("open").trigger("hidden.bs.dropdown",n)})}function s(t){var n=t.attr("data-target");n||(n=t.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var r=n&&e(n);return r&&r.length?r:t.parent()}var t=".dropdown-backdrop",n=".ewDropdown",r=function(t){e(t).on("click.bs.dropdown",this.toggle)};r.prototype.toggle=function(t){var n=e(this);if(n.is(".disabled, :disabled"))return;var r=s(n),o=r.hasClass("open");i(t);if(!o){"ontouchstart"in document.documentElement&&!r.closest(".navbar-nav").length&&e('<div class="dropdown-backdrop"/>').insertAfter(e(this)).on("click",i);var u={relatedTarget:this};r.trigger(t=e.Event("show.bs.dropdown",u));if(t.isDefaultPrevented())return;n.trigger("focus"),r.toggleClass("open").trigger("shown.bs.dropdown",u);var a=n.next();a.is("ul.dropdown-menu")&&a.find("> li > a").css("padding-left",parseInt(n.css("padding-left"),10)+10+"px")}return!1},r.prototype.keydown=function(t){if(!/(38|40|27)/.test(t.keyCode))return;var r=e(this);t.preventDefault(),t.stopPropagation();if(r.is(".disabled, :disabled"))return;var i=s(r),o=i.hasClass("open");if(!o||o&&t.keyCode==27)return t.which==27&&i.find(n).trigger("focus"),r.trigger("click");var u=" li:not(.divider):visible a",a=i.find('[role="menu"]'+u+', [role="listbox"]'+u);if(!a.length)return;var f=a.index(a.filter(":focus"));t.keyCode==38&&f>0&&f--,t.keyCode==40&&f<a.length-1&&f++,~f||(f=0),a.eq(f).trigger("focus")};var o=e.fn.dropdown;e.fn.dropdown=function(t){return this.each(function(){var n=e(this),i=n.data("bs.dropdown");i||n.data("bs.dropdown",i=new r(this)),typeof t=="string"&&i[t].call(n)})},e.fn.dropdown.Constructor=r,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=o,this},e(document).on("click.bs.dropdown.data-api",i).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",n,r.prototype.toggle).on("keydown.bs.dropdown.data-api",n+', [role="menu"], [role="listbox"]',r.prototype.keydown)}(jQuery);